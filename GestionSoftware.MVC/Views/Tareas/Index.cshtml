@model IEnumerable<GestionSoftware.API.Models.Tarea>

@{
    ViewData["Title"] = "Gestión de Tareas";
}

<div class="table-container">
    <div class="table-header">
        <h1>Gestión de Tareas</h1>
        <a asp-action="Create" class="btn-add">+ Nueva Tarea</a>
    </div>
    
    <div class="table-body">
        @if (Model != null && Model.Any())
        {
            <table class="custom-table">
                <thead>
                    <tr>
                        <th>Título</th>
                        <th>Estado</th>
                        <th>Prioridad</th>
                        <th>Fecha Vencimiento</th>
                        <th>Usuario</th>
                        <th>Proyecto</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.Titulo</td>
                            <td>
                                <span class="status-badge status-@item.Estado?.ToLower().Replace(" ", "")">
                                    @item.Estado
                                </span>
                            </td>
                            <td>
                                <span class="priority-badge priority-@item.Prioridad?.ToLower()">
                                    @item.Prioridad
                                </span>
                            </td>
                            <td>@item.FechaVencimiento.ToString("dd/MM/yyyy")</td>
                            <td>@item.UsuarioId</td>
                            <td>@item.ProyectoId</td>
                            <td>
                                <div class="action-buttons">
                                    <a asp-action="Details" asp-route-id="@item.Id" class="btn-action btn-view">Ver</a>
                                    <a asp-action="Edit" asp-route-id="@item.Id" class="btn-action btn-edit">Editar</a>
                                    <a asp-action="Delete" asp-route-id="@item.Id" class="btn-action btn-delete">Eliminar</a>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <div style="padding: 40px; text-align: center; color: #666;">
                <h3>No hay tareas disponibles</h3>
                <p>Comienza creando tu primera tarea.</p>
                <a asp-action="Create" class="btn-primary">Crear Primera Tarea</a>
            </div>
        }
    </div>
</div>
